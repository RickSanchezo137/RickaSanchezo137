# [返回](/)

# 八股文背诵版之—分布式篇

## 理论基础

### :point_right:什么是CAP、BASE？



### :point_right:什么是负载均衡？原理？算法？



### :point_right:了解RPC吗？



### :point_right:对分布式的理解？



## 分布式场景

### :point_right:高并发高负载应用通用处理？

高并发高负载的应用，首先需要结合系统的基本特征来考虑嘛，这种系统首先要考虑并发性、其次是可用性、然后是容错性、最后是响应的时间。对于并发性的保证，我们可以利用分布式节点具有伸缩性的特征，对于高并发量的服务进行节点的水平扩展，再结合负载均衡的机制将流量分摊到每一个节点，提高整个系统能够承载的并发量；同时对于数据库节点，也可以做一些从节点，实现读写分离，或者对于大表查询大库查询，做好分库分表，设置一些缓存等等，降低数据库负担并提高并发能力；或者在高峰期对流量做一些削峰，比如说加入消息队列异步削峰等等；同时也要保证并发安全性，比如对于超卖这种场景，可以采用分布式锁这种处理方式保证并发安全性。对于可用性来说，我们就要求业务节点在出现问题的情况下，也要保证系统的及时响应，比如发现某个服务节点挂了，及时做出服务的熔断或者降级；对于大库大表的查询进行分库分表、读写分离、索引优化等，避免请求太久，然后阻塞导致响应时间太长。容错则要求有自动容错恢复的能力，对于数据库节点这种，合理进行数据库备份、主从同步等等；对于缓存节点，搭建好集群，设置哨兵模式对主节点进行监控，保证其容错恢复能力，或者在节点挂了的时候进行一个请求的重定向，就像Redis的集群重定向那样*（可能可以靠代理中间件来实现？）*。而对于响应的时间，可以根据用户IP，分配距离最近的服务节点等等

### :point_right:分库分表怎么操作？怎么迁移数据？跨库关联查询的问题？

首先对于垂直分表来说，我们需要对大表进行拆分，将热点字段拆分到一张表中，冷字段放到另一张表中，避免对冷数据的查找拖慢性能；对于垂直分库来说，我们需要做到专库专用，将一些不同的业务表放在不同的库当中，降低大库的数据访问压力；随着业务量逐渐增加，单个业务表也慢慢变大，随之要做一些水平拆分，水平分表之后，可以制定相应的规则，给表编个序号，然后修改相应客户端的语句，比如id在多少到多少之间的分配到某个表上，id在另一个范围分配到另一个表上，不过这样需要修改客户端逻辑，可以采取添加一个中间层代理客户端，来存储这种映射关系，客户端统一去访问这个代理客户端

迁移数据的话，可以停机迁移；开机迁移的话，我在考虑是否能借鉴Redis集群重定向这样一种规则，比如查到不对就返回一个ASK标识并且携带正确目标的地址，然后客户端重定向，或者代理客户端重定向去正确位置查询

跨库关联查询可以考虑做全局表/数据冗余...

### :point_right:微服务中一个服务节点挂了，怎么保证最终一致性？







